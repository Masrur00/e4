{"ast":null,"code":"import _slicedToArray from\"E:/html_dir/unit-5/e4/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useRef,useState}from\"react\";import axios from\"axios\";import ButtonComponent from\"./components/ButtonComponent\";import\"./styles.css\";import CityRow from\"./components/CityRow\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function App(){var _useState=useState([{}]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),page=_useState4[0],setPage=_useState4[1];var _useState5=useState(10),_useState6=_slicedToArray(_useState5,2),limit=_useState6[0],setLimit=_useState6[1];var myRef=useRef(null);var myRef2=useRef(null);var handlepage=function handlepage(id){if(id===\"PREV\")setPage(function(prev){return prev-1;});else setPage(function(prev){return prev+1;});};var disabled=function disabled(id){if(page<=1&&id===\"PREV\")myRef.current.disabled=true;if(page>=5&&id===\"NEXT\")myRef2.current.disabled=true;};useEffect(function(){getData();},[page,limit]);var getData=function getData(){return axios.get(\"https://json-server-mocker-masai.herokuapp.com/cities/?_limit=\".concat(limit,\"&_page=\").concat(page)).then(function(res){// handle success      \nsetData(res.data);}).catch(function(error){// handle error\nconsole.log(error);}).then(function(){// always executed\n});};return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"loading-container\"}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"CITY NAME\"}),/*#__PURE__*/_jsx(\"th\",{children:\"COUNTRY NAME\"}),/*#__PURE__*/_jsx(\"th\",{children:\"POPULATION\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:data.map(function(city){return/*#__PURE__*/_jsx(CityRow,{city:city},city.id);})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(ButtonComponent,{id:\"SORT_BUTTON\",title:\"Sort by Increasing Population\"}),/*#__PURE__*/_jsx(ButtonComponent,{title:\"PREV\",id:\"PREV\",text:\"Previous\",handlepage:handlepage,ref:myRef,disabled:disabled}),/*#__PURE__*/_jsx(ButtonComponent,{id:\"NEXT\",title:\"NEXT\",text:\"Next\",handlepage:handlepage,ref:myRef2,disabled:disabled})]})]});}","map":{"version":3,"names":["React","useEffect","useRef","useState","axios","ButtonComponent","CityRow","App","data","setData","page","setPage","limit","setLimit","myRef","myRef2","handlepage","id","prev","disabled","current","getData","get","then","res","catch","error","console","log","map","city"],"sources":["E:/html_dir/unit-5/e4/src/App.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport axios from \"axios\";\nimport ButtonComponent from \"./components/ButtonComponent\";\nimport \"./styles.css\";\nimport CityRow from \"./components/CityRow\";\n\nexport default function App() {\n  const [data, setData] = useState([{}]);\n  const [page,setPage] = useState(1);\n  const [limit,setLimit] = useState(10);\n  const myRef = useRef(null);\n  const myRef2 = useRef(null);\n  \n  const handlepage = (id) => {      \n      if(id === \"PREV\")\n      setPage(prev => prev - 1)\n      else\n      setPage(prev => prev + 1)\n  }\n\n  const disabled = (id) =>{\n       if (page <= 1 && id === \"PREV\") \n         myRef.current.disabled= true;\n\n       if (page >= 5 && id === \"NEXT\")\n       myRef2.current.disabled= true;\n  }\n\n \n  \n  useEffect(()=>{\n     getData();\n  },[page,limit]);\n\n const getData = () => {\n    return axios.get(`https://json-server-mocker-masai.herokuapp.com/cities/?_limit=${limit}&_page=${page}`)\n    .then(function (res) {\n      // handle success      \n      setData(res.data)\n    })\n    .catch(function (error) {\n      // handle error\n      console.log(error);\n    })\n    .then(function () {\n      // always executed\n    }); \n }\n  \n  return (\n    <div className=\"App\">\n      <div id=\"loading-container\"></div>\n      <table>   \n        <thead>\n        <tr>\n          <th>\n            ID\n          </th>\n          <th>\n            CITY NAME\n          </th>\n          <th>\n            COUNTRY NAME\n          </th>\n          <th>\n            POPULATION\n          </th>\n          </tr>\n          </thead>     \n          <tbody>         \n        \n          {\n            data.map((city)=> {\n              return <CityRow city={city} key={city.id}  />\n            })\n          } \n         </tbody>\n      </table>\n\n      <div>\n        <ButtonComponent id=\"SORT_BUTTON\" title={`Sort by Increasing Population`} />\n        <ButtonComponent title=\"PREV\" id=\"PREV\" text=\"Previous\" handlepage={handlepage} ref={myRef} disabled={disabled} />\n        <ButtonComponent id=\"NEXT\" title=\"NEXT\" text=\"Next\"      handlepage={handlepage}  ref={myRef2} disabled={disabled} />\n      </div>\n    </div>\n  );\n}\n"],"mappings":"2GAAA,MAAOA,MAAP,EAAgBC,SAAhB,CAA2BC,MAA3B,CAAmCC,QAAnC,KAAmD,OAAnD,CACA,MAAOC,MAAP,KAAkB,OAAlB,CACA,MAAOC,gBAAP,KAA4B,8BAA5B,CACA,MAAO,cAAP,CACA,MAAOC,QAAP,KAAoB,sBAApB,C,wFAEA,cAAe,SAASC,IAAT,EAAe,CAC5B,cAAwBJ,QAAQ,CAAC,CAAC,EAAD,CAAD,CAAhC,wCAAOK,IAAP,eAAaC,OAAb,eACA,eAAuBN,QAAQ,CAAC,CAAD,CAA/B,yCAAOO,IAAP,eAAYC,OAAZ,eACA,eAAyBR,QAAQ,CAAC,EAAD,CAAjC,yCAAOS,KAAP,eAAaC,QAAb,eACA,GAAMC,MAAK,CAAGZ,MAAM,CAAC,IAAD,CAApB,CACA,GAAMa,OAAM,CAAGb,MAAM,CAAC,IAAD,CAArB,CAEA,GAAMc,WAAU,CAAG,QAAbA,WAAa,CAACC,EAAD,CAAQ,CACvB,GAAGA,EAAE,GAAK,MAAV,CACAN,OAAO,CAAC,SAAAO,IAAI,QAAIA,KAAI,CAAG,CAAX,EAAL,CAAP,CADA,IAGAP,QAAO,CAAC,SAAAO,IAAI,QAAIA,KAAI,CAAG,CAAX,EAAL,CAAP,CACH,CALD,CAOA,GAAMC,SAAQ,CAAG,QAAXA,SAAW,CAACF,EAAD,CAAO,CACnB,GAAIP,IAAI,EAAI,CAAR,EAAaO,EAAE,GAAK,MAAxB,CACEH,KAAK,CAACM,OAAN,CAAcD,QAAd,CAAwB,IAAxB,CAEF,GAAIT,IAAI,EAAI,CAAR,EAAaO,EAAE,GAAK,MAAxB,CACAF,MAAM,CAACK,OAAP,CAAeD,QAAf,CAAyB,IAAzB,CACJ,CAND,CAUAlB,SAAS,CAAC,UAAI,CACXoB,OAAO,GACT,CAFQ,CAEP,CAACX,IAAD,CAAME,KAAN,CAFO,CAAT,CAID,GAAMS,QAAO,CAAG,QAAVA,QAAU,EAAM,CACnB,MAAOjB,MAAK,CAACkB,GAAN,yEAA2EV,KAA3E,mBAA0FF,IAA1F,GACNa,IADM,CACD,SAAUC,GAAV,CAAe,CACnB;AACAf,OAAO,CAACe,GAAG,CAAChB,IAAL,CAAP,CACD,CAJM,EAKNiB,KALM,CAKA,SAAUC,KAAV,CAAiB,CACtB;AACAC,OAAO,CAACC,GAAR,CAAYF,KAAZ,EACD,CARM,EASNH,IATM,CASD,UAAY,CAChB;AACD,CAXM,CAAP,CAYF,CAbD,CAeC,mBACE,aAAK,SAAS,CAAC,KAAf,wBACE,YAAK,EAAE,CAAC,mBAAR,EADF,cAEE,sCACE,oCACA,mCACE,0BADF,cAIE,iCAJF,cAOE,oCAPF,cAUE,kCAVF,GADA,EADF,cAiBI,uBAGEf,IAAI,CAACqB,GAAL,CAAS,SAACC,IAAD,CAAS,CAChB,mBAAO,KAAC,OAAD,EAAS,IAAI,CAAEA,IAAf,EAA0BA,IAAI,CAACb,EAA/B,CAAP,CACD,CAFD,CAHF,EAjBJ,GAFF,cA6BE,oCACE,KAAC,eAAD,EAAiB,EAAE,CAAC,aAApB,CAAkC,KAAK,gCAAvC,EADF,cAEE,KAAC,eAAD,EAAiB,KAAK,CAAC,MAAvB,CAA8B,EAAE,CAAC,MAAjC,CAAwC,IAAI,CAAC,UAA7C,CAAwD,UAAU,CAAED,UAApE,CAAgF,GAAG,CAAEF,KAArF,CAA4F,QAAQ,CAAEK,QAAtG,EAFF,cAGE,KAAC,eAAD,EAAiB,EAAE,CAAC,MAApB,CAA2B,KAAK,CAAC,MAAjC,CAAwC,IAAI,CAAC,MAA7C,CAAyD,UAAU,CAAEH,UAArE,CAAkF,GAAG,CAAED,MAAvF,CAA+F,QAAQ,CAAEI,QAAzG,EAHF,GA7BF,GADF,CAqCD"},"metadata":{},"sourceType":"module"}